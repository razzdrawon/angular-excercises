<div class="exercise-container">
  <h1>Exercise 3-1: 10k+ Item Optimized List</h1>
  <p class="description">
    Lista optimizada con OnPush, trackBy, y paginaci贸n para manejar 10,000+ items eficientemente
  </p>

  <!-- Controles -->
  <div class="controls">
    <div class="control-group">
      <label>Search:</label>
      <input 
        type="text" 
        [value]="searchTerm()"
        (input)="updateSearchTerm($any($event.target).value)"
        placeholder="Search items..."
      />
    </div>

    <div class="control-group">
      <label>Category:</label>
      <select 
        [value]="selectedCategory()"
        (change)="selectCategory($any($event.target).value)"
      >
        @for (cat of categories(); track cat) {
          <option [value]="cat">{{ cat }}</option>
        }
      </select>
    </div>

    <div class="control-group">
      <label>Items per page:</label>
      <select 
        [value]="itemsPerPage()"
        (change)="changeItemsPerPage(+$any($event.target).value)"
      >
        <option [value]="25">25</option>
        <option [value]="50">50</option>
        <option [value]="100">100</option>
        <option [value]="200">200</option>
      </select>
    </div>

    <button (click)="addItem()" class="add-button">Add Item</button>
  </div>

  <!-- Informaci贸n de paginaci贸n -->
  <div class="pagination-info">
    <p>
      Showing {{ paginationInfo().start }} - {{ paginationInfo().end }} 
      of {{ paginationInfo().total }} items
      (Page {{ paginationInfo().page }} of {{ paginationInfo().totalPages }})
    </p>
  </div>

  <!-- Lista optimizada -->
  <div class="list-container">
    <table class="items-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Category</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        @for (item of paginatedItems(); track trackByItemId($index, item)) {
          <tr>
            <td>{{ item.id }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.category }}</td>
            <td>${{ item.value }}</td>
          </tr>
        } @empty {
          <tr>
            <td colspan="4" class="empty-message">No items found</td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Paginaci贸n -->
  @if (paginationInfo().totalPages > 1) {
    <div class="pagination">
      <button 
        (click)="changePage(paginationInfo().page - 1)"
        [disabled]="paginationInfo().page === 1"
      >
        Previous
      </button>
      
      @for (page of [].constructor(paginationInfo().totalPages); track $index) {
        <button
          (click)="changePage($index + 1)"
          [class.active]="paginationInfo().page === $index + 1"
        >
          {{ $index + 1 }}
        </button>
      }

      <button 
        (click)="changePage(paginationInfo().page + 1)"
        [disabled]="paginationInfo().page === paginationInfo().totalPages"
      >
        Next
      </button>
    </div>
  }
</div>

