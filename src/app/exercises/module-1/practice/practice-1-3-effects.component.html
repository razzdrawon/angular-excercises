<div class="practice-container" [class.dark-mode]="darkMode()">
  <header class="header">
    <h1>Practice 1-3: Effects in Action</h1>
    <p class="subtitle">Your turn! Implement effects for logging, notifications, and localStorage</p>
    <div class="instructions">
      <h3>Instructions:</h3>
      <ol>
        <li>Create computed signal for total notification count</li>
        <li>Create effect that logs darkMode changes to console</li>
        <li>Create effect that adds notification when errorCount increases</li>
        <li>Create effect that saves preferences to localStorage</li>
        <li>Create effect that loads preferences from localStorage on init</li>
        <li>Check the reference exercise-1-2 for effects examples</li>
      </ol>
    </div>
  </header>

  <div class="content">
    <!-- User Preferences -->
    <section class="section">
      <h2>User Preferences</h2>
      <div class="preferences">
        <div class="preference-item">
          <label>
            <input 
              type="checkbox" 
              [checked]="darkMode()"
              (change)="toggleDarkMode()">
            Dark Mode
          </label>
        </div>
        
        <div class="preference-item">
          <label>Font Size: {{ fontSize() }}px</label>
          <input 
            type="range" 
            min="12" 
            max="24" 
            [value]="fontSize()"
            (input)="updateFontSize(+$any($event.target).value)">
        </div>
        
        <div class="preference-item">
          <label>Language:</label>
          <select 
            [value]="language()"
            (change)="updateLanguage($any($event.target).value)">
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
          </select>
        </div>
      </div>
      <p class="info">
        Preferences should be saved to localStorage automatically (check your browser's DevTools).
        Refresh the page to see if they're loaded back!
      </p>
    </section>

    <!-- Error/Warning Controls -->
    <section class="section">
      <h2>Test Effects</h2>
      <div class="controls">
        <button (click)="incrementError()">Increment Error Count</button>
        <button (click)="incrementWarning()">Increment Warning Count</button>
      </div>
      <div class="stats">
        <p>Error Count: <strong>{{ errorCount() }}</strong></p>
        <p>Warning Count: <strong>{{ warningCount() }}</strong></p>
        <!-- TODO: Display total notification count -->
      </div>
      <p class="info">
        Open the browser console to see the darkMode effect logging.
        Watch for notifications when error count increases!
      </p>
    </section>

    <!-- Notifications -->
    <section class="section">
      <h2>Notifications</h2>
      <div class="notifications">
        @if (notifications().length === 0) {
          <p class="empty">No notifications yet</p>
        } @else {
          @for (notification of notifications(); track notification.id) {
            <div class="notification" [class]="'type-' + notification.type">
              <span class="message">{{ notification.message }}</span>
              <span class="timestamp">{{ notification.timestamp | date:'HH:mm:ss' }}</span>
              <button (click)="removeNotification(notification.id)" class="close-btn">Ã—</button>
            </div>
          }
        }
      </div>
      @if (notifications().length > 0) {
        <button (click)="clearNotifications()" class="clear-btn">Clear All</button>
      }
    </section>
  </div>
</div>

