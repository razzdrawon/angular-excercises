<div class="exercise-container">
  <header class="header">
    <h1>Exercise 1-4: Reactive Dashboard</h1>
    <p class="subtitle">A complete dashboard using Signals, Computed, Effects, and RxJS integration</p>
  </header>

  <div class="content">
    <!-- Stats Cards -->
    <section class="stats-grid">
      <div class="stat-card income">
        <h3>Total Income</h3>
        <p class="stat-value">${{ totalIncome().toLocaleString() }}</p>
      </div>
      <div class="stat-card expense">
        <h3>Total Expenses</h3>
        <p class="stat-value">${{ totalExpenses().toLocaleString() }}</p>
      </div>
      <div class="stat-card" [class]="'net-' + balanceStatus()">
        <h3>Net Amount</h3>
        <p class="stat-value">${{ netAmount().toLocaleString() }}</p>
      </div>
      <div class="stat-card time">
        <h3>Current Time</h3>
        <p class="stat-value">{{ currentTime() | date:'HH:mm:ss' }}</p>
      </div>
    </section>

    <!-- Add Transaction Form -->
    <section class="section">
      <h2>Add Transaction</h2>
      <div class="form-group">
        <input 
          type="text" 
          #descInput
          placeholder="Description"
          class="form-input">
        <input 
          type="number" 
          #amountInput
          placeholder="Amount"
          class="form-input"
          min="0"
          step="0.01">
        <div class="button-group">
          <button 
            class="btn-income"
            (click)="addIncome(descInput.value, +amountInput.value); descInput.value=''; amountInput.value=''">
            Add Income
          </button>
          <button 
            class="btn-expense"
            (click)="addExpense(descInput.value, +amountInput.value); descInput.value=''; amountInput.value=''">
            Add Expense
          </button>
        </div>
      </div>
    </section>

    <!-- Recent Transactions -->
    <section class="section">
      <h2>Recent Transactions</h2>
      <div class="transactions-list">
        @if (recentTransactions().length === 0) {
          <p class="empty">No transactions yet</p>
        } @else {
          @for (transaction of recentTransactions(); track transaction.id) {
            <div class="transaction-item" [class]="'type-' + transaction.type">
              <div class="transaction-info">
                <span class="description">{{ transaction.description }}</span>
                <span class="date">{{ transaction.date | date:'short' }}</span>
              </div>
              <div class="transaction-amount">
                <span [class]="transaction.type === 'income' ? 'positive' : 'negative'">
                  {{ transaction.type === 'income' ? '+' : '-' }}${{ Math.abs(transaction.amount).toLocaleString() }}
                </span>
                <button 
                  class="remove-btn"
                  (click)="removeTransaction(transaction.id)">
                  Ã—
                </button>
              </div>
            </div>
          }
        }
      </div>
    </section>

    <!-- Features Used -->
    <section class="section concepts">
      <h2>Features Used in This Dashboard</h2>
      <ul>
        <li><strong>Signals</strong>: balance, transactions, currentTime (from Observable)</li>
        <li><strong>Computed Signals</strong>: totalIncome, totalExpenses, netAmount, recentTransactions, balanceStatus</li>
        <li><strong>Effects</strong>: balanceAlert - warns when balance goes negative</li>
        <li><strong>RxJS Integration</strong>: currentTime$ Observable converted to signal with toSignal()</li>
        <li><strong>Reactive Updates</strong>: All values update automatically when signals change</li>
      </ul>
    </section>
  </div>
</div>

